{"ast":null,"code":"var cookies = function cookies(data, opt) {\n  function defaults(obj, defs) {\n    obj = obj || {};\n\n    for (var key in defs) {\n      if (obj[key] === undefined) {\n        obj[key] = defs[key];\n      }\n    }\n\n    return obj;\n  }\n\n  defaults(cookies, {\n    expires: 365 * 24 * 3600,\n    path: '/',\n    secure: window.location.protocol === 'https:',\n    // Advanced\n    nulltoremove: true,\n    autojson: true,\n    autoencode: true,\n    encode: function encode(val) {\n      return encodeURIComponent(val);\n    },\n    decode: function decode(val) {\n      return decodeURIComponent(val);\n    },\n    fallback: false\n  });\n  opt = defaults(opt, cookies);\n\n  function expires(time) {\n    var expires = time;\n\n    if (!(expires instanceof Date)) {\n      expires = new Date();\n      expires.setTime(expires.getTime() + time * 1000);\n    }\n\n    return expires.toUTCString();\n  }\n\n  if (typeof data === 'string') {\n    var value = document.cookie.split(/;\\s*/).map(opt.autoencode ? opt.decode : function (d) {\n      return d;\n    }).map(function (part) {\n      return part.split('=');\n    }).reduce(function (parts, part) {\n      parts[part[0]] = part.splice(1).join('=');\n      return parts;\n    }, {})[data];\n    if (!opt.autojson) return value;\n    var real;\n\n    try {\n      real = JSON.parse(value);\n    } catch (e) {\n      real = value;\n    }\n\n    if (typeof real === 'undefined' && opt.fallback) real = opt.fallback(data, opt);\n    return real;\n  } // Set each of the cookies\n\n\n  for (var key in data) {\n    var val = data[key];\n    var expired = typeof val === 'undefined' || opt.nulltoremove && val === null;\n    var str = opt.autojson ? JSON.stringify(val) : val;\n    var encoded = opt.autoencode ? opt.encode(str) : str;\n    if (expired) encoded = '';\n    var res = opt.encode(key) + '=' + encoded + (opt.expires ? ';expires=' + expires(expired ? -10000 : opt.expires) : '') + ';path=' + opt.path + (opt.domain ? ';domain=' + opt.domain : '') + (opt.secure ? ';secure' : '');\n    if (opt.test) opt.test(res);\n    document.cookie = res;\n  }\n\n  return cookies;\n};\n\nexport default cookies;","map":null,"metadata":{},"sourceType":"module"}